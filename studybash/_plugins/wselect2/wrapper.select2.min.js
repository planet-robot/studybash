function WSelect2(a){if(!(this instanceof WSelect2))throw new Error("Must be called with `new`");this.elem=a.elem,this.makeElement=a.makeElement,this.filterSelection=a.filterSelection,this.__class_types=["WSelect2"]}WSelect2.prototype.init=function(a){if(this.elem.select2&&this.reset(),this.data=void 0,this.tags=void 0,this.raw=void 0,a.tags)if(this.tags=a.tags,a.defaultTags&&a.defaultTags.length){var b="";for(x=0;x<a.defaultTags.length;x++)x&&(b+=","),b+=a.defaultTags[x];this.elem.attr("value",b)}else a.defaultTags=null;else a.raw?(this.raw=_.clone(a.raw),this.makeArray()):a.data&&(this.data=_.clone(a.data));var c={data:this.data,tags:this.tags,tokenSeparators:this.tags?a.tokenSeparators:void 0,allowClear:a.allowClear?!0:!1,placeholder:a.placeholder?a.placeholder:void 0,formatSelection:_.bind(this.formatSelection,this),createSearchChoice:a.preventNew?function(){return null}:this.newEntry};(this.tags&&!a.defaultTags&&!a.preventNew||!this.tags&&!this.data&&!a.preventNew)&&_.extend(c,{formatNoMatches:function(){return""}}),this.elem.select2(c)},WSelect2.prototype.enable=function(){this.elem.select2("enable",!0)},WSelect2.prototype.disable=function(){this.elem.select2("enable",!1)},WSelect2.prototype.getContainer=function(){return this.elem.select2("container")},WSelect2.prototype.reset=function(){this.elem.select2("data",null)},WSelect2.prototype.set=function(a){this.elem.select2("val",a)},WSelect2.prototype.setData=function(a){this.elem.select2("data",a)},WSelect2.prototype.getSelection=function(){var a=this.elem.select2("data");for($.isArray(a)||(a=a?[a]:[]),x=0;x<a.length;x++){var b=a[x];if(b.isNew){var c=_.filter(this.tags?this.tags:this.data,function(a){return a.text===b.text&&!a.isNew});c.length&&(b.isNew=!1)}}return a},WSelect2.prototype.makeArray=function(){for(this.data=[],x=0;x<this.raw.length;x++){var a={};this.makeElement?a=this.makeElement(this.raw[x]):a.id=a.text=this.raw[x],this.data.push(a)}},WSelect2.prototype.newEntry=function(a){return{id:a,text:a,isNew:!0}},WSelect2.prototype.formatSelection=function(a,b,c){var d=this.filterSelection?this.filterSelection(a):a.text;return d?c(d):void 0};