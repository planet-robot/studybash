var bsSystemMsgs=function(){var a=null,b={url:null,title:null,user:{},interval:6e4};return onTimer=function(){shutdown(),$.ajax({url:b.url,type:"POST",timeout:1e4,dataType:"json",contentType:"application/json",data:JSON.stringify(b.user),context:this,beforeSend:function(a){a.setRequestHeader("SESSIONTOKEN",b.user.token)}.bind(this)}).done(function(a){a.msgs.length&&(b.user.last_system_msg_read=a.id,display(a.msgs)),begin()}).fail(function(a,b,c){var d=200===a.status?c:a.responseText;console.error(d)})},template=function(a){var b="        <li class='list-group-item bs-mine-msg'>            <p><span>Message ID:</span> "+a.id+"</p>            <p><span>Timestamp:</span> "+a.created_on+"</p>            <p><span>Message:</span> "+a.message+"</p>        </li>        ";return b},display=function(a){var c=b.title+":\n\n";_.each(a,function(a){c+="ID : "+a.id+"\nTimestamp: "+a.created_on+"\nMessage: "+a.message+"\n----------\n"},this),alert(c)},begin=function(){a?(shutdown(),a.play()):(a=$.timer(function(){onTimer()}),a.set({time:b.interval,autostart:!0}))},shutdown=function(){a.stop()},{settings:b,begin:begin,shutdown:shutdown}}();